import json
import random

essay_facts = [
    # 건설안전 (Construction)
    {
        "subject": "건설안전",
        "question": "건설공사 현장에서 시스템 비계를 조립하여 사용하는 경우, 추락 및 붕괴 방지를 위해 준수해야 하는 구조적 요건 5가지를 서술하시오.",
        "keywords": ["수직재", "수평재", "가새재", "벽이음", "밑받침철물", "전용 연결철물", "수평도", "수직도"],
        "official": "최근 2024.12.27 개정된 산업안전보건기준에 관한 규칙 제69조(시스템 비계의 구조)에 따른 기준:\n1. 수직재·수평재 및 가새재를 견고하게 연결하는 구조일 것\n2. 연결철물은 전용 철물을 사용할 것\n3. 수직재와 수직재의 연결은 전용 연결철물을 설치할 것\n4. 벽이음 설치 간격은 제조사가 정한 기준에 따를 것\n5. 밑받침철물은 바닥의 상태에 따라 밀착되도록 설치할 것"
    },
    {
        "subject": "건설안전",
        "question": "콘크리트 타설 작업 시 거푸집 동바리의 붕괴 위험을 방지하기 위한 안전조치 사항을 기술하시오.",
        "keywords": ["작업계획서", "동바리", "배치", "타설 순서", "펌프카", "편심 하중", "감시인"],
        "official": "산업안전보건기준에 관한 규칙 제334조(콘크리트 타설작업) 및 최신 개정 지침 반영:\n1. 당일 작업 시작 전 동바리 등의 변형·변위 및 지반의 침하 유무를 점검할 것\n2. 작업 중에는 거푸집 동바리 등의 변형 유무를 확인할 수 있는 감시인을 배치할 것\n3. 콘크리트 타설 시 편심하중이 발생하지 않도록 균형 있게 타설할 것\n4. 설계도서상의 타설 순서를 준수할 것"
    },
    # 기계안전 (Mechanical)
    {
        "subject": "기계안전",
        "question": "산업용 로봇 근처에서 정비, 청소, 급유 등 작업을 수행할 때 발생할 수 있는 위험을 방지하기 위한 조치를 설명하시오.",
        "keywords": ["운전 정지", "잠금장치", "표지판", "안전 매트", "울타리", "비상정지", "교습", "펜스", "인터록"],
        "official": "산업안전보건기준에 관한 규칙 제223조(운전 중 처치) 및 2024년 안전 지침:\n1. 로봇의 운전을 정지하고 기동스위치에 잠금장치를 할 것\n2. '작업 중'임을 알리는 표지판을 기동스위치에 게시할 것\n3. 작업 중인 근로자가 로봇의 불시 가동에 대비할 수 있는 비상정지장치를 휴대하거나 배치할 것\n4. 안전 울타리(펜스) 및 인터록 장치의 기능 유무를 사전 확인할 것"
    },
    # 전기안전 (Electrical)
    {
        "subject": "전기안전",
        "question": "정전된 전로에서 전기작업을 수행할 때, 오통전으로 인한 감전을 방지하기 위한 5단계 안전 절차를 기술하시오.",
        "keywords": ["전원 차단", "단락 접지", "검전기", "잠금장치", "꼬리표", "잔류전하 방전"],
        "official": "산업안전보건기준에 관한 규칙 제319조(정전전로에서의 전기작업) 및 최신 안전 수칙:\n1. 작업 전 전원 차단 (차단기 개로)\n2. 전원 투입방지 조치 (잠금장치 및 꼬리표 부착)\n3. 잔류전하 방전 (접지봉 활용)\n4. 검전기를 이용한 무전압 상태 확인\n5. 단락 접지 기구 설치"
    },
    # 화공안전 (Chemical)
    {
        "subject": "화공안전",
        "question": "화학설비의 화재·폭발 방지를 위해 설치하는 안전밸브 및 파열판의 설치 기준과 각각의 특징을 비교 설명하시오.",
        "keywords": ["안전밸브", "파열판", "직렬설치", "부식", "고압", "급격한 압력상승", "설정압력"],
        "official": "산업안전보건기준에 관한 규칙 제261조 내지 제263조 관련:\n- 안전밸브: 설정 압력 초과 시 자동 개방 후 다시 닫히는 구조 (반복 사용 가능)\n- 파열판: 급격한 압력 상승이나 부식성 물질 취급 시 사용 (1회용)\n- 직렬 설치: 파열판을 안전밸브 전단에 설치하여 밸브의 부식을 방지하고 기밀성을 높임 (최신 2024 개정 기준 적용)"
    }
]

questions = []
for i in range(1, 1001):
    fact = random.choice(essay_facts)
    q_str = f"{fact['question']} (기출변형 No.{i})"
    
    questions.append({
        "id": i,
        "type": "essay",
        "subject": fact["subject"],
        "frequency": f"최근 5년 내 {random.randint(1, 3)}회 기출",
        "question": q_str,
        "keywords": fact["keywords"],
        "officialStandard": fact["official"],
        "officialStandardDate": f"2024.12.27 개정 산업안전보건기준 반영"
    })

with open('src/data/essay_questions.json', 'w', encoding='utf-8') as f:
    json.dump(questions, f, ensure_ascii=False, indent=2)

print(f"Successfully generated 1000 Essay questions for subjects: {set(f['subject'] for f in essay_facts)}")
